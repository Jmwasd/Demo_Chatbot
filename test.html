<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%> <%@ taglib prefix="c"
uri="http://java.sun.com/jsp/jstl/core" %> <%@ taglib prefix="form"
uri="http://www.springframework.org/tags/form" %> <%@ taglib prefix="spring"
uri="http://www.springframework.org/tags"%>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/resources/css/main/memberMain.css"
    />
    <style>
      .sbchart-legend-background {
        stroke-width: 0;
      }
      .sbchart-legend-item-text {
        font-size: 12px;
      }
    </style>
    <script>
      var objMyMatchNtceData = {};
      var objMyBusinNtceData = {};
      var grid1_columns = [
        {
          field: "checked",
          type: "check",
          width: 60,
          align: "center",
          editable: true,
          directApplyValue: true,
          viewMode: "check",
          checkValue: "Y",
          unCheckValue: "N",
          showOriginValue: true,
          checkMode: "checkbox",
          sortable: false,
          directApplyEdit: true,
          filter: false,
          captionCheck: true,
          captionLayout: { center: "check" },
        },
        {
          caption: "등록번호",
          field: "bidNtceNo",
          editable: false,
          type: "text",
          width: 120,
          align: "center",
          cellTemplate: "#bidNtceNo",
        },
        {
          caption: "수요기관",
          field: "dminsttNm",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#dminsttNm",
        },
        {
          caption: "공고명",
          field: "bidNtceNm",
          editable: false,
          type: "text",
          width: 370,
          align: "left",
          cellTemplate: "#bidNtceNm",
        },
        {
          caption: "예산(원)",
          field: "bdgtAmt",
          editable: false,
          type: "text",
          width: 110,
          align: "right",
          format: "#,##0.##",
        },
        {
          caption: "사전공고일",
          field: "rcptDt",
          editable: false,
          type: "text",
          width: 100,
          align: "center",
        },
        {
          caption: "공고마감일",
          field: "bidClseDt",
          editable: false,
          type: "text",
          width: 100,
          align: "center",
        },
        {
          caption: "파일1",
          field: "ntceSpecFileNm1",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile1",
        },
        {
          caption: "url1",
          field: "ntceSpecDocUrl1",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일2",
          field: "ntceSpecFileNm2",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile2",
        },
        {
          caption: "url2",
          field: "ntceSpecDocUrl2",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일3",
          field: "ntceSpecFileNm3",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile3",
        },
        {
          caption: "url3",
          field: "ntceSpecDocUrl3",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일4",
          field: "ntceSpecFileNm4",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile4",
        },
        {
          caption: "url4",
          field: "ntceSpecDocUrl4",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일5",
          field: "ntceSpecFileNm5",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile5",
        },
        {
          caption: "url5",
          field: "ntceSpecDocUrl5",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일6",
          field: "ntceSpecFileNm6",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile6",
        },
        {
          caption: "url6",
          field: "ntceSpecDocUrl6",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일7",
          field: "ntceSpecFileNm7",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile7",
        },
        {
          caption: "url7",
          field: "ntceSpecDocUrl7",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일8",
          field: "ntceSpecFileNm8",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile8",
        },
        {
          caption: "url8",
          field: "ntceSpecDocUrl8",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일9",
          field: "ntceSpecFileNm9",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile9",
        },
        {
          caption: "url9",
          field: "ntceSpecDocUrl9",
          editable: false,
          type: "text",
          visible: false,
        },
        {
          caption: "파일10",
          field: "ntceSpecFileNm10",
          editable: false,
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile10",
        },
        {
          caption: "url10",
          field: "ntceSpecDocUrl10",
          editable: false,
          type: "text",
          visible: false,
        },
      ];
      var grid2_columns = [
        {
          caption: "등록번호",
          field: "ntceNo",
          type: "text",
          width: 120,
          align: "center",
          part: "head",
          cellTemplate: "#ntceNo",
        },
        {
          caption: "수요기관",
          field: "dminsttNm",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#dminsttNm",
        },
        { caption: "ntce구분", field: "ntceDiv", type: "text", visible: false },
        { caption: "공고마감일", field: "endDt", type: "text", visible: false },
        {
          caption: "사업명",
          field: "bidNtceNm",
          type: "text",
          width: 370,
          align: "left",
          cellTemplate: "#bidNtceNm2",
        },
        {
          caption: "참여업체 수",
          field: "prtcptCnum",
          type: "text",
          width: 90,
          align: "right",
          format: "#,##0.##",
        },
        {
          caption: "투찰률(%)",
          field: "bidprcRt",
          type: "text",
          width: 75,
          align: "right",
          format: "0.00",
        },
        {
          caption: "낙찰일시",
          field: "fnlSucsfDate",
          type: "text",
          width: 100,
          align: "center",
        },
        {
          caption: "낙찰금액(원)",
          field: "sucsfbidAmt",
          type: "text",
          width: 110,
          align: "right",
          format: "#,##0.##",
        },
        {
          caption: "낙찰률(%)",
          field: "sucsfbidRate",
          type: "text",
          width: 75,
          align: "right",
          format: "0.00",
        },
        { caption: "", field: "empty", type: "text", width: 1 },
      ];
      var grid3_1_columns = [
        {
          caption: "총 참여건수",
          field: "joinCnt",
          type: "text",
          width: 140,
          align: "center",
          format: "#,##0.##",
        },
        {
          caption: "투찰률 평균(%)",
          field: "bidprcRtAvg",
          type: "text",
          width: 140,
          align: "center",
          format: "0.00",
        },
        {
          caption: "낙찰률 평균(%)",
          field: "sucsfbidRateAvg",
          type: "text",
          width: 140,
          align: "center",
          format: "0.00",
        },
        {
          caption: "실주",
          field: "failCnt",
          type: "text",
          width: 130,
          align: "center",
          format: "#,##0.##",
        },
        {
          caption: "주관",
          field: "bidMstCnt",
          type: "text",
          width: 130,
          align: "center",
          format: "#,##0.##",
        },
        {
          caption: "하도",
          field: "bidSubCnt",
          type: "text",
          width: 130,
          align: "center",
          format: "#,##0.##",
        },
        { caption: "", field: "empty", type: "text", width: 1 },
      ];
      var grid3_2_columns = [
        {
          caption: "참여기관",
          field: "dminsttNm",
          type: "text",
          width: 150,
          align: "left",
        },
        {
          caption: "참여건수",
          field: "joinCnt",
          type: "text",
          width: 80,
          align: "right",
          format: "#,##0.##",
        },
        {
          caption: "투찰률(%)",
          field: "bidprcRtAvg",
          type: "text",
          width: 80,
          align: "right",
          format: "0.00",
        },
        {
          caption: "낙찰률(%)",
          field: "sucsfbidRateAvg",
          type: "text",
          width: 80,
          align: "right",
          format: "0.00",
        },
        { caption: "", field: "empty", type: "text", width: 1 },
      ];
      var grid4_columns = [
        {
          caption: "사업자번호",
          field: "prcbdrBizno",
          type: "text",
          width: 100,
          align: "center",
          cellTemplate: "#prcbdrBizno",
        },
        {
          caption: "사업자명",
          field: "prcbdrNm",
          type: "text",
          width: 210,
          align: "left",
        },
        {
          caption: "최근개찰일",
          field: "recDt",
          type: "text",
          width: 100,
          align: "center",
        },
        {
          caption: "기관",
          field: "dminsttCdCnt",
          type: "text",
          width: 90,
          align: "right",
          format: "#,##0.##",
        },
        {
          caption: "투찰률(%)",
          field: "bidprcRtAvg",
          type: "text",
          width: 90,
          align: "right",
          format: "0.00",
        },
        {
          caption: "낙찰률(%)",
          field: "sucsfbidRateAvg",
          type: "text",
          width: 90,
          align: "right",
          format: "0.00",
        },
        {
          caption: "주관",
          field: "bidNtceMst",
          type: "text",
          width: 90,
          align: "right",
          format: "#,##0.##",
        },
        {
          caption: "하도",
          field: "bidNtceSub",
          type: "text",
          width: 90,
          align: "right",
          format: "#,##0.##",
        },
        { caption: "", field: "empty", type: "text", width: 1000 },
      ];
      /**
       * SBGrid3.0
       */
      let SbGrid, SbUtils, SbDSConfig;

      function formatDate(date) {
        const yyyy = date.getFullYear();
        const mm = String(date.getMonth() + 1).padStart(2, "0");
        const dd = String(date.getDate()).padStart(2, "0");
        return yyyy + mm + dd;
      }

      const now = new Date();
      const oneYearAgo = new Date();
      oneYearAgo.setFullYear(now.getFullYear() - 1);

      function getInitDate() {
        return formatDate(oneYearAgo) + "," + formatDate(now);
      }

      $(document).ready(function () {
        SBUxMethod.render();
        SBUxMethod.set("picCompCmpyBegin", getInitDate());
        //Set Grid
        fn_setGrid1(); //My 맞춤공고
        fn_setGrid2(); //My 사업공고
        fn_setGrid3_2(); //나의 낙찰분석
        //Get Grid Data
        fn_searchGrid3_1Data();
        fn_searchGrid3_2Data();
        searchCompCmpy();
      });
      /* function () {
	SbGrid = window.SbGrid.Grid;
	SbUtils = window.SbGrid.Utils;
	SbDSConfig = window.SbGrid.DSConfig;
	//Set Grid
	fn_setGrid1();//My 맞춤공고
	fn_setGrid2();//My 사업공고
	fn_setGrid3_2();//나의 낙찰분석
	fn_setGrid4();//관심회사 분석
	//Get Grid Data
	fn_searchGrid3_1Data();
	fn_searchGrid3_2Data();
	fn_searchGrid4Data();
}; */
      //
      function fn_complete() {
        $("html, body").animate({ scrollTop: 0 }, 0);
      }
      //My 맞춤공고 그리드
      function fn_setGrid1() {
        let gridConfig = {
          dataSource: {
            ajax: {
              select: async (request) => await getData(request),
              total: "total",
              selected: "data",
            },
            serverPaging: true,
            pageSize: 50,
            serverSorting: true,
          },
          columns: grid1_columns,
          container: "#grdMyMatchNtceArea",
          sortable: true,
          pageable: true,
          editable: {
            mode: "incell",
            eventType: "mouseup",
            immediateValidationCheck: true,
          },
          pagerBar: { center: ["pager"] },
          width: "100%",
          height: "100%",
          selectable: { rowSelect: true },
          resizable: true,
        };
        grdMyMatchNtce = SBGrid3.createGrid(gridConfig);
        fn_searchGrid1("init");
      }

      function fn_searchGrid1() {
        window.getData = async function (request) {
          return new Promise((resolve, reject) => {
            let url = searchMyMatchNtceParam
              ? '<c:url value="/main/selMyMatchNtce.do"/>' +
                "?" +
                searchMyMatchNtceParam
              : '<c:url value="/main/selMyMatchNtce.do"/>';
            $.ajax({
              url: url,
              type: "post",
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              data: JSON.stringify(request),
              //async : false,
              success: function (result) {
                const reponseData = result.reponseData.map((el) => ({
                  ...el,
                  checked: "N",
                }));

                result.reponseData = reponseData;
                resolve({ data: result.reponseData, total: result.totalCnt });

                fn_complete();
              },
            });
          });
        };
      }

      //My 사업공고 그리드
      function fn_setGrid2() {
        let dsconfig = {
          //data: myBusinNtce,
          ajax: {
            select: {
              url: '<c:url value="/main/selMyBusinNtce.do" />',
              loadType: "post",
              dataType: "json",
              request: function (request, operation) {
                if (searchMyBusinNtceParam != undefined) {
                  request.url += "?" + searchMyBusinNtceParam;
                }
                return request;
              },
              response: function () {},
            },
            total: "totalCnt",
            selected: "reponseData",
          },
          schema: {
            id: "ntceNo",
          },
          lazyLoading: true,
          serverPaging: true,
          pageSize: 10,
        };
        let gridConfig = {
          dataSource: dsconfig,
          columns: grid2_columns,
          container: "#grdMyBusinNtceArea",
          sortable: true,
          pageable: true,
          pagerBar: ["pager"],
          width: "100%",
          height: "100%",
          selectable: { rowSelect: true },
          hover: "cell",
          resizable: true,
          showRowNo: true,
          virtualRow: false,
        };
        grdMyBusinNtce = SBGrid3.createGrid(gridConfig);
      }
      //
      function fn_searchGrid3_1Data() {
        $.ajax({
          url: "<c:url value='/main/selMyBidAnaly.do' />",
          type: "POST",
          dataType: "json",
          success: function (result) {
            myBidAnaly = result;
            fn_setMyBidAnalyInfo(myBidAnaly);
          },
          complete: function () {
            //Chart
            var sCnt = 0;
            var fCnt = 0;
            if (myBidAnaly.length > 0) {
              sCnt = myBidAnaly[0].bidMstCnt + myBidAnaly[0].bidSubCnt;
              fCnt = myBidAnaly[0].failCnt;
            }
            chtMyBidAnaly = new sb.chart.render("#chtMyBidAnalyArea", {
              global: {
                size: {
                  width: 400,
                  height: 200,
                },
                color: {
                  pattern: ["#5ac9f4", "#2cb8b5"],
                },
              },
              data: {
                type: "pie",
                json: [{ 수주: sCnt, 실주: fCnt }],
                keys: {
                  value: ["수주", "실주"],
                },
              },
              title: {
                text: "${prcbdrNm}",
              },
              legend: {
                position: "inset",
              },
            });
          },
        });
      }
      //
      function fn_setMyBidAnalyInfo(_listData) {
        if (_listData.length > 0) {
          let rowData = _listData[0];
          $("#joinCnt").html(rowData.joinCnt);
          $("#bidprcRtAvg").html(Math.round(rowData.bidprcRtAvg * 100) / 100);
          $("#sucsfbidRateAvg").html(
            Math.round(rowData.sucsfbidRateAvg * 100) / 100
          );
          $("#failCnt").html(rowData.failCnt);
          $("#bidMstCnt").html(rowData.bidMstCnt);
          $("#bidSubCnt").html(rowData.bidSubCnt);
        } else {
          $("#joinCnt").html(0);
          $("#bidprcRtAvg").html(0);
          $("#sucsfbidRateAvg").html(0);
          $("#failCnt").html(0);
          $("#bidMstCnt").html(0);
          $("#bidSubCnt").html(0);
        }
      }
      //나의 낙찰분석 그리드
      function fn_setGrid3_2() {
        let dsconfig = {
          data: myBidJoin,
        };
        let gridConfig = {
          dataSource: dsconfig,
          columns: grid3_2_columns,
          container: "#grdMyBidJoinArea",
          width: "100%",
          height: "100%",
          selectable: { rowSelect: true },
          hover: "cell",
          resizable: true,
          showRowNo: true,
        };
        grdMyBidJoin = SBGrid3.createGrid(gridConfig);
      }
      //
      function fn_searchGrid3_2Data(_param) {
        if (_param == undefined) {
          _param = {};
        }
        $.ajax({
          url: "<c:url value='/main/selMyBidJoin.do' />",
          type: "POST",
          data: _param,
          dataType: "json",
          success: function (result) {
            myBidJoin = result;
            grdMyBidJoin.dataConfig.data = myBidJoin;
            grdMyBidJoin.reload();
          },
        });
      }
      //관심회사 분석 그리드
      function fn_setGrid4(data) {
        let dsconfig = {
          data: data,
          pageSize: 20,
          clientPaging: true,
        };
        let gridConfig = {
          dataSource: dsconfig,
          columns: grid4_columns,
          container: "#grdCompCmpyArea",
          pageable: true,
          width: "100%",
          height: "100%",
          selectable: { rowSelect: true },
          pagerBar: { center: ["pager"] },
          hover: "cell",
          resizable: true,
          showRowNo: true,
        };
        grdCompCmpy = SBGrid3.createGrid(gridConfig);
      }
      //
      function fn_searchGrid4Data(_param) {
        grdCompCmpy && SBGrid3.showLoading(grdCompCmpy, true);
        if (_param == undefined) {
          _param = {};
        }
        $.ajax({
          url: "<c:url value='/main/selCompCmpy.do' />",
          type: "POST",
          data: _param,
          dataType: "json",
          //async: false,
          success: function (result) {
            fn_setGrid4(result);
            SBGrid3.showLoading(grdCompCmpy, false);
          },
        });
      }
      $(function () {
        $("#bid-main-search").hide();
        SBUxMethod.hide("inpMyMatchNtceAuto");
        SBUxMethod.hide("inpMyBusinNtceAuto");
        //관심회사분석 화면으로 이동
        $(".compAnaly").click(function () {
          window.location.href =
            '<c:url value="/companaly/selectCompAnalyMain.do" />';
        });
      });
      var grdMyBidAnaly, myBidAnaly, propsMyBidAnaly;
      var chtMyBidAnaly;
      var grdMyBidJoin, myBidJoin, propsMyBidJoin;
      var grdCompCmpy, compCmpy, propsCompCmpy;
      var grdMyMatchNtce, myMatchNtce, propsMyMatchNtce; //My 맞춤공고
      var grdMyBusinNtce, myBusinNtce; //My 사업공고
      var grdBidNtceSearch, bidNtceSearch, propsBidNtceSearch; //입찰공고 검색
      // 나의 낙찰분석 검색
      function searchMyBidAnaly() {
        var beginDt = SBUxMethod.get("picMyBidAnalyBegin_from");
        var endDt = SBUxMethod.get("picMyBidAnalyBegin_to");
        if (!beginDt && !endDt) {
          beginDt = "";
          endDt = "";
        } else if (beginDt && !endDt) {
          alert("종료일을 입력하세요.");
          return;
        } else if (!beginDt && endDt) {
          alert("시작일을 입력하세요.");
          return;
        } else if (
          Number(beginDt.replace(/-/g, "")) > Number(endDt.replace(/-/g, ""))
        ) {
          alert("시작일이 종료일보다 늦습니다.");
          return;
        }
        if (beginDt.length == 8) {
          beginDt =
            beginDt.substr(0, 4) +
            "-" +
            beginDt.substr(4, 2) +
            "-" +
            beginDt.substr(6, 2);
        }
        if (endDt.length == 8) {
          endDt =
            endDt.substr(0, 4) +
            "-" +
            endDt.substr(4, 2) +
            "-" +
            endDt.substr(6, 2);
        }
        var param = {
          beginDt: beginDt,
          endDt: endDt,
        };
        $.ajax({
          url: "<c:url value='/main/selMyBidAnaly.do' />",
          type: "POST",
          data: param,
          dataType: "json",
          async: false,
          success: function (result) {
            myBidAnaly = result;
            fn_setMyBidAnalyInfo(myBidAnaly);
            //Chart
            var sCnt = 0;
            var fCnt = 0;
            if (myBidAnaly.length > 0) {
              sCnt = myBidAnaly[0].bidMstCnt + myBidAnaly[0].bidSubCnt;
              fCnt = myBidAnaly[0].failCnt;
            }
            chtMyBidAnaly.render({
              global: {
                size: {
                  width: 400,
                  height: 200,
                },
                color: {
                  pattern: ["#5ac9f4", "#2cb8b5"],
                },
              },
              data: {
                type: "pie",
                json: [{ 수주: sCnt, 실주: fCnt }],
                keys: {
                  value: ["수주", "실주"],
                },
              },
              title: {
                text: "${prcbdrNm}",
              },
              legend: {
                position: "inset",
              },
            });
          },
        });
        fn_searchGrid3_2Data(param);
      }
      // 사업자 재무정보 팝업
      function cmpyFinanceOpenPop(prcbdrBizno) {
        openCommPopup(
          "cmpyFinance",
          "/common/popup/commonPopup.do",
          prcbdrBizno
        );
      }
      // 관심회사분석 검색
      function searchCompCmpy() {
        var beginDt = SBUxMethod.get("picCompCmpyBegin_from");
        var endDt = SBUxMethod.get("picCompCmpyBegin_to");
        if (!beginDt && !endDt) {
          beginDt = "";
          endDt = "";
        } else if (beginDt && !endDt) {
          alert("종료일을 입력하세요.");
          return;
        } else if (!beginDt && endDt) {
          alert("시작일을 입력하세요.");
          return;
        } else if (
          Number(beginDt.replace(/-/g, "")) > Number(endDt.replace(/-/g, ""))
        ) {
          alert("시작일이 종료일보다 늦습니다.");
          return;
        }
        var beginDt2 =
          beginDt.substr(0, 4) +
          "-" +
          beginDt.substr(4, 2) +
          "-" +
          beginDt.substr(6, 2);
        var endDt2 =
          endDt.substr(0, 4) +
          "-" +
          endDt.substr(4, 2) +
          "-" +
          endDt.substr(6, 2);
        beginDt = beginDt2;
        endDt = endDt2;
        var param = {
          beginDt: beginDt,
          endDt: endDt,
        };
        fn_searchGrid4Data(param);
      }
      // My 맞춤공고 검색
      let searchMyMatchNtceParam;
      function searchMyMatchNtce() {
        var searchCond = SBUxMethod.get("selMyMatchNtce");
        var searchNm = SBUxMethod.get("inpMyMatchNtce");

        if (!searchNm) {
          if (searchCond === "01") {
            alert("공고명을 입력하세요.");
            return;
          } else if (searchCond === "02") {
            alert("기관명을 입력하세요.");
            return;
          } else {
            searchNm = "";
          }
        }
        searchMyMatchNtceParam =
          "searchCond=" + searchCond + "&searchNm=" + searchNm;
        grdMyMatchNtce.reload();
      }
      // 맞춤공고 상세 팝업
      function preDtlOpenPop(ntceNo) {
        if (ntceNo.length === 6) {
          // 사전규격은 match 데이타가 없는듯--> 이대로 둬도 문제가 발생안함
          openCommPopup("preDtl", "/common/popup/commonPopup.do", ntceNo);
        } else {
          openCommPopup("bidDtl", "/common/popup/commonPopup.do", ntceNo);
        }
      }
      // 맞춤공고 수요기관 낙찰 현황 팝업
      function openDminsttBidSttusPopupMybusin(dminsttNm) {
        var dminsttBidSttus = [];

        var popup = openPopup("/common/popup/dminsttBidSttus.do");
        popup.url = "<c:url value='/common/popup/dminsttBidSttusList.do' />";
        popup.dminsttNm = dminsttNm;
        popup.dminsttBidSttus = dminsttBidSttus;
        popup.objData = { dminsttNm: dminsttNm };
      }
      // 입찰공고 검색
      function search() {
        var dminsttNm = SBUxMethod.get("dminsttNm");
        var cond =
          SBUxMethod.get("cond") == undefined ? "" : SBUxMethod.get("cond");
        var prcbdrNm = SBUxMethod.get("prcbdrNm");
        var prdctDtlListAll = SBUxMethod.get("prdctDtlListAll").prdctDtlListAll;
        var prdctDtlList = SBUxMethod.get("prdctDtlList");
        var objPrdctDtlList = [];
        var dtInterval = SBUxMethod.get("dtInterval");
        var beginDt =
          SBUxMethod.get("beginDt_from") == undefined
            ? ""
            : SBUxMethod.get("beginDt_from");
        var endDt =
          SBUxMethod.get("beginDt_to") == undefined
            ? ""
            : SBUxMethod.get("beginDt_to");
        var cnt = 0;
        if (dminsttNm && prcbdrNm) {
          if (!cond) {
            alert("and/or 조건을 선택하세요.");
            return;
          }
        }
        if (!prdctDtlListAll) {
          for (var prop in prdctDtlList) {
            if (prdctDtlList[prop]) {
              objPrdctDtlList.push(prdctDtlList[prop]);
              cnt++;
            }
          }
          if (cnt == 0) {
            alert("사업구분을 선택하세요.");
            return;
          }
        }
        if (dtInterval === "pick") {
          if (!beginDt || !endDt) {
            alert("시작일과 종료일을 모두 입력하세요.");
            return;
          } else if (
            Number(beginDt.replace(/-/g, "")) > Number(endDt.replace(/-/g, ""))
          ) {
            alert("시작일이 종료일보다 늦습니다.");
            return;
          }
          dtInterval = "";
        }
        searchBidNtceParam =
          "dminsttNm=" +
          dminsttNm +
          "&cond=" +
          cond +
          "&prcbdrNm=" +
          prcbdrNm +
          "&prdctDtlList=" +
          objPrdctDtlList +
          "&dtInterval=" +
          dtInterval +
          "&beginDt=" +
          beginDt +
          "&endDt=" +
          endDt;
        if ($("#bid-main-search").css("display") === "none") {
          $("#bid-main-contents").hide();
          $("#bid-main-search").show();
          createBidNtceSearch();
        } else {
          grdBidNtceSearch.reload();
        }
      }
      // 입찰공고 검색 결과 그리드 생성
      var grid_columns = [
        {
          caption: "입찰공고번호",
          field: "bidNtceNo",
          type: "text",
          width: 120,
          align: "center",
          part: "head",
          cellTemplate: "#bidNtceNo_2",
        },
        {
          caption: "사전규격등록번호",
          field: "bfSpecRgstNo",
          type: "text",
          width: 130,
          align: "center",
          part: "head",
          cellTemplate: "#bfSpecRgstNo",
        },
        {
          caption: "사업구분",
          field: "businDiv",
          type: "text",
          width: 100,
          align: "center",
          part: "head",
        },
        {
          caption: "수요기관",
          field: "dminsttNm",
          type: "text",
          width: 300,
          align: "left",
          part: "head",
        },
        {
          caption: "예산(원)",
          field: "bdgtAmt",
          type: "number",
          width: 150,
          align: "right",
          dataType: "number",
          min: 0,
          format: "#,###.##",
        },
        {
          caption: "공고명",
          field: "bidNtceNm",
          type: "text",
          width: 500,
          align: "left",
          cellTemplate: "#bidNtceNm_2",
        },
        {
          caption: "사전공고일",
          field: "bidNtceDt",
          type: "text",
          width: 100,
          align: "center",
        },
        {
          caption: "공고마감일",
          field: "bidClseDt",
          type: "text",
          width: 100,
          align: "center",
        },
        {
          caption: "상태",
          field: "progrsDivNm",
          type: "text",
          width: 80,
          align: "center",
        },
        {
          caption: "파일1",
          field: "ntceSpecFileNm1",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile1_2",
        },
        {
          caption: "url1",
          field: "ntceSpecDocUrl1",
          type: "text",
          visible: false,
        },
        {
          caption: "파일2",
          field: "ntceSpecFileNm2",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile2_2",
        },
        {
          caption: "url2",
          field: "ntceSpecDocUrl2",
          type: "text",
          visible: false,
        },
        {
          caption: "파일3",
          field: "ntceSpecFileNm3",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile3_2",
        },
        {
          caption: "url3",
          field: "ntceSpecDocUrl3",
          type: "text",
          visible: false,
        },
        {
          caption: "파일4",
          field: "ntceSpecFileNm4",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile4_2",
        },
        {
          caption: "url4",
          field: "ntceSpecDocUrl4",
          type: "text",
          visible: false,
        },
        {
          caption: "파일5",
          field: "ntceSpecFileNm5",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile5_2",
        },
        {
          caption: "url5",
          field: "ntceSpecDocUrl5",
          type: "text",
          visible: false,
        },
        {
          caption: "파일6",
          field: "ntceSpecFileNm6",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile6_2",
        },
        {
          caption: "url6",
          field: "ntceSpecDocUrl6",
          type: "text",
          visible: false,
        },
        {
          caption: "파일7",
          field: "ntceSpecFileNm7",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile7_2",
        },
        {
          caption: "url7",
          field: "ntceSpecDocUrl7",
          type: "text",
          visible: false,
        },
        {
          caption: "파일8",
          field: "ntceSpecFileNm8",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile9_2",
        },
        {
          caption: "url8",
          field: "ntceSpecDocUrl8",
          type: "text",
          visible: false,
        },
        {
          caption: "파일9",
          field: "ntceSpecFileNm9",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile9_2",
        },
        {
          caption: "url9",
          field: "ntceSpecDocUrl9",
          type: "text",
          visible: false,
        },
        {
          caption: "파일10",
          field: "ntceSpecFileNm10",
          type: "text",
          width: 200,
          align: "left",
          cellTemplate: "#downloadFile10_2",
        },
        {
          caption: "url10",
          field: "ntceSpecDocUrl10",
          type: "text",
          visible: false,
        },
      ];
      let searchBidNtceParam;
      function createBidNtceSearch() {
        let dsconfig = {
          data: bidNtceSearch,
          ajax: {
            select: {
              url: '<c:url value="/main/selBidNtceSearch.do" />',
              loadType: "post",
              dataType: "json",
              request: function (request, operation) {
                //SBUxMethod.openProgress("loading");
                if (searchBidNtceParam != undefined) {
                  request.url += "?" + searchBidNtceParam;
                }
                return request;
              },
            },
            total: "totalCnt",
            selected: "reponseData",
          },
          schema: {
            id: "bidNtceNo",
          },
          lazyLoading: true,
          serverPaging: true,
          pageSize: 20,
        };
        let gridConfig = {
          dataSource: dsconfig,
          columns: grid_columns,
          container: "#grdBidNtceSearchArea",
          sortable: true,
          pageable: true,
          pagerBar: ["pager"],
          pagerBar: { center: ["pager"] },
          width: "100%",
          height: "100%",
          selectable: { rowSelect: true },
          hover: "cell",
          resizable: true,
          showRowNo: true,
          virtualRow: false,
        };
        grdBidNtceSearch = SBGrid3.createGrid(gridConfig);
      }
      // 공고사업 페이징사이즈 변경
      var grdBidNtceSearchArea_pagingSize = gfn_gridPagingSizeList(20);
      function fn_changeGrdBidNtceSearchAreaPagingSize(pagingSize) {
        grdBidNtceSearch.dataConfig.pageSize = Number(pagingSize);
        grdBidNtceSearch.reload();
      }
      function fn_openBfSpecPopup(bfSpecRgstNo) {
        openCommPopup("preDtl", "/common/popup/commonPopup.do", bfSpecRgstNo);
      }
      function fn_openBidNtcePopup(bidNtceNo) {
        openCommPopup("bidDtl", "/common/popup/commonPopup.do", bidNtceNo);
      }
      function fn_openDminsttBidSttusPopup(dminsttNm) {
        var objData = { dminsttNm: dminsttNm };
        var dminsttBidSttus = [];
        $.ajax({
          url: "<c:url value='/common/popup/dminsttBidSttusList.do' />",
          type: "POST",
          async: false,
          data: objData,
          dataType: "json",
          success: function (result) {
            dminsttBidSttus = JSON.parse(result.responseData);
          },
        });
        if (dminsttBidSttus.length > 0) {
          var popup = openPopup("/common/popup/dminsttBidSttus.do");
          popup.dminsttNm = dminsttNm;
          popup.dminsttBidSttus = dminsttBidSttus;
        } else {
          alert("낙찰 현황 정보가 없습니다.");
        }
      }
      // My 사업공고 검색
      let searchMyBusinNtceParam;
      function searchMyBusinNtce() {
        var searchCond = SBUxMethod.get("selMyBusinNtce");
        var searchNm = SBUxMethod.get("inpMyBusinNtce");
        if (searchCond === "02") {
          searchNm = SBUxMethod.get("inpMyBusinNtceAuto");
        }
        if (!searchNm) {
          if (searchCond === "01") {
            alert("공고명을 입력하세요.");
            return;
          } else if (searchCond === "02") {
            alert("기관명을 입력하세요.");
            return;
          } else {
            searchNm = "";
          }
        }
        searchMyBusinNtceParam =
          "searchCond=" + searchCond + "&searchNm=" + searchNm;
        grdMyBusinNtce.reload();
      }
      function fn_downloadFile1(_field) {
        let _url = grdMyMatchNtce.selectManager.prevRowItem.getValue(_field);
        location.href = _url;
      }
      function fn_downloadFile2(_field) {
        let _url = grdBidNtceSearch.selectManager.prevRowItem.getValue(_field);
        location.href = _url;
      }
      //입찰정보 검색 팝업
      function opnNtcRstOpenPop(ntceNo, endDt, ntceNm, rlDminsttNm, ntceDiv) {
        if (ntceDiv == "PRIOR" /* ntceNo.length === 6 */) {
          var endDt2 =
            endDt.substr(0, 4) + endDt.substr(5, 2) + endDt.substr(8, 2);
          openCommPopupSrh(
            "/common/popup/commonPopupSrh.do",
            ntceNm,
            rlDminsttNm,
            endDt2
          );
        } else {
          openCommPopup("bidDtl", "/common/popup/commonPopup.do", ntceNo);
        }
      }

      //나의 기관으로 저장
      function addMyOrgan() {
        var arrCheckedRows = grdMyMatchNtce.rows;
        var arrNtceNo = [];
        for (var i = 0; i < arrCheckedRows.length; i++) {
          if (!arrCheckedRows[i]) {
            continue;
          }
          var rowData = arrCheckedRows[i].data;

          if (rowData.checked === "Y") {
            arrNtceNo.push(rowData.dminsttNm);
          }
        }

        if (arrNtceNo.length > 0) {
          var objData = { dminsttNmList: arrNtceNo };
          $.ajax({
            url: "<c:url value='/bidanaly/insMyOrgan.do' />",
            type: "POST",
            data: objData,
            dataType: "json",
            success: function (result) {
              alert("총 " + result + " 기관이 저장되었습니다.");
            },
          });
        } else {
          alert("나의  기관으로 저장 할 항목을 선택해 주세요.");
        }
      }

      //나의사업 등록 레이어 팝업
      function fn_openModalInsertMyBusin() {
        var ntceNoList = new Array();
        var arrCheckedRows = grdMyMatchNtce.rows;
        var arrNtceNo = [];
        var modalBody = "";
        var confirmMessage = "";

        for (var i = 0; i < arrCheckedRows.length; i++) {
          if (!arrCheckedRows[i]) {
            continue;
          }
          var rowData = arrCheckedRows[i].data;

          if (rowData.checked === "Y") {
            confirmMessage = rowData.bidNtceNm;
            ntceNoList.push(rowData.bidNtceNo);
          }
        }

        if (ntceNoList.length <= 0) {
          alert("나의 사업으로 등록 할 항목을 선택해 주세요.");
          return;
        }

        var modalBody = "";
        if (ntceNoList.length == 1) {
          modalBody =
            '<spring:message code="com.confirm.modal.insert" arguments="사업명,' +
            confirmMessage +
            '"></spring:message>';
        } else {
          modalBody =
            '<spring:message code="com.confirm.modal.insert.multi" arguments="나의사업에,' +
            ntceNoList.length +
            '"></spring:message>';
        }
        var modalHTML =
          "\
     <body-html>" +
          modalBody +
          '</body-html>\
     <footer-html>\
         <div class="board-ok-btn-wrap">\
             <ul>\
                 <li class="ok"><a href="javascript:fn_insertMyBusin(\'' +
          ntceNoList.join(",") +
          "');\">등록</a></li>\
                 <li><a href=\"javascript:SBUxMethod.closeModal('modal_middle')\">취소</a></li>\
             </ul>\
         </div>\
     </footer-html>";

        SBUxMethod.setModalTitle("modal_middle", "나의사업 등록");
        SBUxMethod.refresh("modal_middle", modalHTML);
        SBUxMethod.openModal("modal_middle");
      }

      //나의사업 등록
      function fn_insertMyBusin(ntceNo) {
        $.ajax({
          url: "<c:url value='/bidInfo/insertMyBusin.do' />",
          type: "POST",
          data: { ntceNo: ntceNo, ntceDcd: "PRIOR" },
          dataType: "json",
          success: function (result) {
            if (result.resultCd === "SUCCESS") {
              alert(result.resultMsg);
            } else {
              alert("에러발생 : " + result.resultMsg);
            }
          },
          complete: function () {
            SBUxMethod.closeModal("modal_middle");
          },
        });
      }
    </script>
    <!-- cell template -->
    <script id="bidNtceNo" type="text/x-handlebars-template">
      <a href="javascript:preDtlOpenPop('{{bidNtceNo}}');">{{bidNtceNo}}</a>--%>
      <a
        href="javascript:fn_openBidNtcePopup('{{bidNtceNo}}');"
      >{{bidNtceNo}}</a>
    </script>
    <script id="dminsttNm" type="text/x-handlebars-template">
      <a
        href="javascript:openDminsttBidSttusPopupMybusin('{{dminsttNm}}');"
      >{{dminsttNm}}</a>
    </script>
    <script id="bidNtceNm" type="text/x-handlebars-template">
      <a href="javascript:preDtlOpenPop('{{bidNtceNo}}');">{{bidNtceNm}}</a>--%>
      <a
        href="javascript:fn_openBidNtcePopup('{{bidNtceNo}}');"
      >{{bidNtceNm}}</a>
    </script>
    <script id="downloadFile1" type="text/x-handlebars-template">
      	<a href="javascript:fn_downloadFile1('ntceSpecDocUrl1');">{{ntceSpecFileNm1}}</a>
      <%--	{{#if contains ntceSpecFileNm1 "추후제공예정"}}--%>
      <%--		<a href="javascript:fn_downloadFile1('ntceSpecDocUrl1');">{{ntceSpecFileNm1}}</a>--%>
      <%--	{{/if}}--%>
    </script>
    <script id="downloadFile2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl2');"
      >{{ntceSpecFileNm2}}</a>
    </script>
    <script id="downloadFile3" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl3');"
      >{{ntceSpecFileNm3}}</a>
    </script>
    <script id="downloadFile4" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl4');"
      >{{ntceSpecFileNm4}}</a>
    </script>
    <script id="downloadFile5" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl5');"
      >{{ntceSpecFileNm5}}</a>
    </script>
    <script id="downloadFile6" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl6');"
      >{{ntceSpecFileNm6}}</a>
    </script>
    <script id="downloadFile7" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl7');"
      >{{ntceSpecFileNm7}}</a>
    </script>
    <script id="downloadFile8" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl8');"
      >{{ntceSpecFileNm8}}</a>
    </script>
    <script id="downloadFile9" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl9');"
      >{{ntceSpecFileNm9}}</a>
    </script>
    <script id="downloadFile10" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile1('ntceSpecDocUrl10');"
      >{{ntceSpecFileNm10}}</a>
    </script>
    <script id="ntceNo" type="text/x-handlebars-template">
      <a
        href="javascript:preDtlOpenPop('{{ntceNo}}', '{{ntceDiv}}');"
      >{{ntceNo}}</a>
    </script>
    <script id="bidNtceNm2" type="text/x-handlebars-template">
      <a
        href="javascript:opnNtcRstOpenPop('{{ntceNo}}', '{{endDt}}', '{{bidNtceNm}}', '{{dminsttNm}}', '{{ntceDiv}}');"
      >{{bidNtceNm}}</a>--%>
    </script>
    <script id="prcbdrBizno" type="text/x-handlebars-template">
      <a
        href="javascript:cmpyFinanceOpenPop('{{prcbdrBizno}}');"
      >{{prcbdrBizno}}</a>
    </script>
    <!-- 공고 사업 -->
    <script id="bidNtceNo_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_openBidNtcePopup('{{bidNtceNo}}');"
        class="gridLink"
      >{{bidNtceNo}}</a>--%>
      <a
        href="javascript:fn_openBidNtcePopup('{{bidNtceNo}}');"
      >{{bidNtceNo}}</a>
    </script>
    <script id="bfSpecRgstNo" type="text/x-handlebars-template">
      <a
        href="javascript:fn_openBfSpecPopup('{{bfSpecRgstNo}}');"
        class="gridLink"
      >{{bfSpecRgstNo}}</a>
    </script>
    <script id="dminsttNm_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_openDminsttBidSttusPopup('{{dminsttNm}}');"
        class="gridLink"
      >{{dminsttNm}}</a>--%>
    </script>
    <script id="bidNtceNm_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_openBidNtcePopup('{{bidNtceNo}}');"
        class="gridLink"
      >{{bidNtceNm}}</a>--%>
      <a
        href="javascript:fn_openBidNtcePopup('{{bidNtceNo}}');"
      >{{bidNtceNm}}</a>
    </script>
    <!-- 입찰공고 검색 -->
    <script id="downloadFile1_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl1');"
      >{{ntceSpecFileNm1}}</a>
    </script>
    <script id="downloadFile2_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl2');"
      >{{ntceSpecFileNm2}}</a>
    </script>
    <script id="downloadFile3_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl3');"
      >{{ntceSpecFileNm3}}</a>
    </script>
    <script id="downloadFile4_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl4');"
      >{{ntceSpecFileNm4}}</a>
    </script>
    <script id="downloadFile5_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl5');"
      >{{ntceSpecFileNm5}}</a>
    </script>
    <script id="downloadFile6_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl6');"
      >{{ntceSpecFileNm6}}</a>
    </script>
    <script id="downloadFile7_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl7');"
      >{{ntceSpecFileNm7}}</a>
    </script>
    <script id="downloadFile8_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl8');"
      >{{ntceSpecFileNm8}}</a>
    </script>
    <script id="downloadFile9_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl9');"
      >{{ntceSpecFileNm9}}</a>
    </script>
    <script id="downloadFile10_2" type="text/x-handlebars-template">
      <a
        href="javascript:fn_downloadFile2('ntceSpecDocUrl10');"
      >{{ntceSpecFileNm10}}</a>
    </script>
  </head>

  <sbux-modal
    id="modal_middle"
    name="modal_middle"
    uitype="middle"
    footer-is-close-button="false"
  ></sbux-modal>

  <body>
    <div class="bid-box" style="display: none">
      <h3 class="bid-title01">입찰공고 검색</h3>
      <div class="bid-search-container">
        <div class="bid-search-wrap" style="grid-template-columns: 0.7fr 1fr">
          <dl>
            <dt>기관명</dt>
            <dd>
              <sbux-input
                id="dminsttNm"
                name="dminsttNm"
                uitype="text"
                init=""
                onkeyup="autoDminsttNm(dminsttNm);"
                autocomplete-ref="dminstts"
                autocomplete-height="200px"
              >
              </sbux-input>
            </dd>
            <ul class="or-wrap">
              <li>
                <sbux-radio
                  id="cond"
                  text-right-padding="10px"
                  name="cond"
                  uitype="normal"
                  jsondata-ref="condData"
                ></sbux-radio>
              </li>
            </ul>
            <dt class="or">사업자명</dt>
            <dd>
              <sbux-input
                id="prcbdrNm"
                name="prcbdrNm"
                uitype="text"
                init="${prcbdrNm}"
                onkeyup="autoPrcbdrNm(prcbdrNm);"
                autocomplete-ref="prcbdrs"
                autocomplete-height="200px"
              >
              </sbux-input>
            </dd>
          </dl>
          <dl>
            <dt>사업구분</dt>
            <dd class="bid-chk-wrap">
              <sbux-checkbox
                id="prdctDtlListAll"
                onclick="clickPrdctDtlListAll(prdctDtlListAll)"
                text-right-padding="10px"
                item-top-padding="1px"
                name="prdctDtlListAll"
                uitype="normal"
                jsondata-ref="prdctDtlListAllData"
              ></sbux-checkbox>
              <sbux-checkbox
                id="prdctDtlList"
                onclick="clickPrdctDtlList(prdctDtlList)"
                text-right-padding="10px"
                item-top-padding="1px"
                name="prdctDtlList"
                uitype="normal"
                jsondata-ref="prdctDtlListData"
              ></sbux-checkbox>
            </dd>
          </dl>
          <dl class="span-col-02">
            <dt>기간구분</dt>
            <dd class="bid-rdo-wrap">
              <sbux-radio
                id="dtInterval"
                text-right-padding="10px"
                item-top-padding="8px"
                name="dtInterval"
                uitype="normal"
                jsondata-ref="dtIntervalData"
                onclick="clickDtInterval(dtInterval);"
              ></sbux-radio>
              <div class="bid-picker-wrap">
                <!-- original START -->
                <!-- <sbux-picker id="beginDt" name="beginDt" uitype="date" mode="popup" disabled></sbux-picker> -->
                <!-- <span class="dash">~</span> -->
                <!-- <sbux-picker id="endDt" name="endDt" uitype="date" mode="popup" disabled></sbux-picker> -->
                <!-- original END -->
                <!-- edit START -->
                <sbux-datepicker
                  id="beginDt"
                  name="beginDt"
                  uitype="range"
                  double-open="true"
                  split-text="~"
                  peroid-close-on-date-selection="true"
                  show-period-bar="true"
                  period-set="-1Y,-1M,-1W,1W,1M,1Y"
                  disabled
                >
                </sbux-datepicker>
                <!-- edit END -->
              </div>
            </dd>
          </dl>

          <div class="clear"></div>
        </div>
        <div class="search-btn-wrap">
          <button
            type="button"
            class="search-btn btn-style-20250212"
            onclick="search();"
          >
            검색
          </button>
        </div>
      </div>
    </div>

    <!-- 통합검색 마크업-->
    <div class="main-search-all-container">
      <sbux-select
        id="select_single"
        name="select_single"
        uitype="single"
        class="select-wrap"
      >
        <option-item value="bidNtceNm">사업명</option-item>
        <option-item value="dminsttNm">수요기관명</option-item>
      </sbux-select>

      <sbux-input
        id="main-search-all-input"
        uitype="text"
        onkeypress="onKeyPress(event)"
        placeholder="찾으시는 공고명을 입력해주세요"
        autocomplete-ref="dminstts"
        autocomplete-height="200px"
        wrap-class="input-wrap"
      ></sbux-input>

      <button class="btn-wrap" onclick="search()">
        <img
          class="main-search-icon-back"
          src="/resources/img/common/main-search-icon-back.png"
        />
      </button>
    </div>

    <div id="bid-main-contents">
      <div class="bid-row-2box">
        <li>
          <div class="bid-box">
            <h3 class="bid-title01">
              My 맞춤공고<span class="bid-title01-info"
                >나의 기관과 및 나의 사업으로 등록된 데이터를 기반으로 맞춤공고
                추천</span
              >
            </h3>
            <!-- <a href="javascript:void(0);" class="more-btn"><i class="fas fa-plus"></i></a> -->
            <div class="my-contents-box-top box-top-menu-wrap">
              <ul class="box-top-menu" style="float: left">
                <li>
                  <a href="javascript:addMyOrgan();">나의 기관으로 저장</a>
                </li>
                <li>
                  <a href="javascript:fn_openModalInsertMyBusin();"
                    >나의 사업으로 등록</a
                  >
                </li>
              </ul>
              <div class="my-contents-search-box">
                <sbux-select
                  id="selMyMatchNtce"
                  name="selMyMatchNtce"
                  uitype="single"
                  jsondata-ref="mySelectBusin"
                ></sbux-select>
                <div class="input-wrap" style="display: flex">
                  <sbux-input
                    id="inpMyMatchNtce"
                    onkeyenter="searchMyMatchNtce()"
                    name="inpMyMatchNtce"
                    uitype="text"
                    style="width: 250px"
                  ></sbux-input>
                  <sbux-input
                    id="inpMyMatchNtceAuto"
                    name="inpMyMatchNtceAuto"
                    uitype="text"
                    style="width: 250px"
                    onkeyup="autoDminsttNm(inpMyMatchNtceAuto);"
                    autocomplete-ref="dminstts"
                    autocomplete-height="200px"
                    onkeyenter="searchMyMatchNtce()"
                  >
                  </sbux-input>
                  <ul class="box-top-menu picker-btn">
                    <li><a href="javascript:searchMyMatchNtce();">검색</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="bid-con-box">
              <div
                id="grdMyMatchNtceArea"
                style="width: 100%; height: 389px"
              ></div>
            </div>
          </div>
        </li>
        <li>
          <div class="bid-box">
            <h3 class="bid-title01">관심회사 분석</h3>
            <%--
            <a href="javascript:void(0);" class="more-btn compCmpy-detail"
              ><i class="fas fa-plus"></i
            ></a>
            --%>
            <a href="javascript:void(0);" class="more-btn compAnaly"
              ><i class="fas fa-list"></i
            ></a>

            <div
              class="box-top-menu-wrap picker-topm"
              style="display: flex; justify-content: end"
            >
              <div class="bid-picker-wrap">
                <!-- original START -->
                <!--
						 	<sbux-datepicker id="picCompCmpyBegin" name="picCompCmpyBegin" uitype="date" mode="popup"></sbux-datepicker>
							<span class="dash">~</span>
							<sbux-datepicker id="picCompCmpyEnd" name="picCompCmpyEnd" uitype="date" mode="popup"></sbux-datepicker>
						-->
                <!-- original End -->
                <c:set var="startDate" value="2018/01/01" />
                <c:set var="endDate" value="2018/01/05" />

                <sbux-datepicker
                  id="picCompCmpyBegin"
                  name="picCompCmpyBegin"
                  uitype="range"
                  double-open="true"
                  split-text="~"
                  peroid-close-on-date-selection="true"
                  show-period-bar="true"
                  period-set="-1Y,-1M,-1W,1W,1M,1Y"
                >
                </sbux-datepicker>
              </div>
              <ul class="box-top-menu picker-btn">
                <li><a href="javascript:searchCompCmpy();">검색</a></li>
              </ul>
              <ul class="box-top-menu">
                <%--
                <li>
                  <a
                    href="javascript:downloadExcel('grdCompCmpy', '경쟁사_분석');"
                    >엑셀 다운로드</a
                  >
                </li>
                --%>
              </ul>
            </div>
            <div class="bid-con-box">
              <div
                id="grdCompCmpyArea"
                style="width: 100%; height: 389px"
              ></div>
            </div>
          </div>
        </li>
      </div>
      <div class="max-width-wrap">
        <div class="max-width">
          <div class="board-wrap">
            <div class="bid-box">
              <div class="bid-con-box">
                <div class="title-wrap">
                  <h3 class="bid-title01">업계동향</h3>
                  <a href="javascript:loadNoticeBody();" class="b-more-link"
                    >더보러가기</a
                  >
                </div>
                <ul id="noticeListContainer" class="board-list notice-list">
                  <!--         <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li> -->
                </ul>

                <!-- <div id="grdNoticeArea" style="width: 100%; height: 300px"></div> -->
              </div>
              <div>
                <sbux-modal
                  id="detailNoticeModal"
                  name="detailNoticeModal"
                  uitype="middle"
                  header-title="업계동향 상세"
                  body-html-id="modalBodyDetailNotice"
                  footer-html-id="modalFooter"
                ></sbux-modal>
              </div>
            </div>

            <div class="bid-box">
              <div class="bid-con-box">
                <div class="title-wrap">
                  <h3 class="bid-title01">Q&A</h3>
                  <a href="javascript:loadQABody();" class="b-more-link"
                    >더보러가기</a
                  >
                </div>
                <ul id="qnaListContainer" class="board-list qna-list">
                  <!--      <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li>
                                        <li>
                                             <a href="">게시판글게시판글게시판글게시판글게시판글게시판글</a>
                                             <time>2025.10.10</time>
                                        </li> -->
                </ul>

                <!-- <div id="grdNoticeArea" style="width: 100%; height: 300px"></div> -->
              </div>
              <div>
                <sbux-modal
                  id="detailNoticeModal"
                  name="detailNoticeModal"
                  uitype="middle"
                  header-title="업계동향 상세"
                  body-html-id="modalBodyDetailNotice"
                  footer-html-id="modalFooter"
                ></sbux-modal>
              </div>
            </div>
          </div>
          <div class="main-link-box">
            <ul>
              <li>
                <a href="https://www.g2b.go.kr/" target="_blank">
                  <img src="/resources/img/common/main-link-simbol.png" />
                  <div>나라장터 바로가기</div>
                </a>
              </li>
              <li>
                <a
                  href="https://digitalmall.g2b.go.kr/link/GDSF001_01/?ctrtItemMngNo=002361901_1000000001"
                  target="_blank"
                >
                  <img src="/resources/img/common/main-link-simbol.png" />
                  <div>SBGrid 디지털서비스몰</div>
                </a>
              </li>
              <li>
                <a
                  href="https://digitalmall.g2b.go.kr/link/GDSF001_01/?ctrtItemMngNo=002362628_1000000001"
                  target="_blank"
                >
                  <img src="/resources/img/common/main-link-simbol.png" />
                  <div>SBChart 디지털서비스몰</div>
                </a>
              </li>
              <li>
                <a
                  href="https://shop.g2b.go.kr//link/GMSF001_01/?ctrtItemMngNo=002270079_1020000001"
                  target="_blank"
                >
                  <img src="/resources/img/common/main-link-simbol.png" />
                  <div>SBUx 종합쇼핑몰</div>
                </a>
              </li>
              <li>
                <a
                  href="https://digitalmall.g2b.go.kr/link/GDSF001_01/?ctrtItemMngNo=R25TA00876852000000001"
                  target="_blank"
                >
                  <img src="/resources/img/common/main-link-simbol.png" />
                  <div>SBWrapDoc 디지털서비스몰</div>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="bid-row-2box" style="display: none">
        <li>
          <div class="bid-box">
            <h3 class="bid-title01">나의 낙찰분석</h3>
            <a href="javascript:void(0);" class="more-btn myBidAnaly-detail"
              ><i class="fas fa-list"></i
            ></a>
            <div class="box-top-menu-wrap picker-topm">
              <div class="bid-picker-wrap">
                <!-- original START : datepicker 변경-->
                <!-- 
							<sbux-picker id="picMyBidAnalyBegin" name="picMyBidAnalyBegin" uitype="date" mode="popup"></sbux-picker>
							<span class="dash">~</span>
							<sbux-picker id="picMyBidAnalyEnd" name="picMyBidAnalyEnd" uitype="date" mode="popup"></sbux-picker>
						-->
                <!-- original END -->
                <sbux-datepicker
                  id="picMyBidAnalyBegin"
                  name="picMyBidAnalyBegin"
                  uitype="range"
                  double-open="true"
                  split-text="~"
                  peroid-close-on-date-selection="true"
                  show-period-bar="true"
                ></sbux-datepicker>
              </div>
              <ul class="box-top-menu picker-btn">
                <li><a href="javascript:searchMyBidAnaly();">검색</a></li>
              </ul>
            </div>
            <table class="bid-tbl01">
              <colgroup>
                <col style="width: 18%" />
                <col style="width: 17%" />
                <col style="width: 17%" />
                <col style="width: 16%" />
                <col style="width: 16%" />
                <col style="width: 16%" />
              </colgroup>
              <tbody>
                <tr>
                  <th style="text-align: center">총 참여건수</th>
                  <th style="text-align: center">투찰률 평균(%)</th>
                  <th style="text-align: center">낙찰률 평균(%)</th>
                  <th style="text-align: center">실주</th>
                  <th style="text-align: center">주관</th>
                  <th style="text-align: center">하도</th>
                </tr>
                <tr>
                  <td>
                    <span id="joinCnt"></span>
                  </td>
                  <td>
                    <span id="bidprcRtAvg"></span>
                  </td>
                  <td>
                    <span id="sucsfbidRateAvg"></span>
                  </td>
                  <td>
                    <span id="failCnt"></span>
                  </td>
                  <td>
                    <span id="bidMstCnt"></span>
                  </td>
                  <td>
                    <span id="bidSubCnt"></span>
                  </td>
                </tr>
              </tbody>
            </table>
            <%--
            <div class="bid-con-box">
              <div
                id="grdMyBidAnalyArea"
                style="width: 100%; height: 80px"
              ></div>
            </div>
            --%>
            <div class="bid-con-wrap box-2-wrap">
              <div class="bid-con-box-wrap">
                <div class="bid-con-box" style="min-height: 222px">
                  <div id="chtMyBidAnalyArea"></div>
                </div>
              </div>
              <div class="bid-con-box-wrap">
                <div class="bid-con-box">
                  <div
                    id="grdMyBidJoinArea"
                    style="width: 100%; height: 200px"
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="bid-box">
            <h3 class="bid-title01">
              My 사업공고<span class="bid-title01-info"
                >나의 사업으로 등록된 데이터를 기반으로 사업공고 추천</span
              >
            </h3>
            <!-- <a href="javascript:void(0);" class="more-btn"><i class="fas fa-plus"></i></a> -->
            <%--
            <jsp:include page="/jsp/main/myBusinNtce.jsp"></jsp:include>
            --%>
            <div class="box-top-menu-wrap right-align">
              <sbux-select
                id="selMyBusinNtce"
                name="selMyBusinNtce"
                uitype="single"
                jsondata-ref="mySelectData"
                onchange="changeSearchSel(selMyBusinNtce, 'inpMyBusinNtce');"
              ></sbux-select>
              <div class="input-wrap">
                <sbux-input
                  id="inpMyBusinNtce"
                  name="inpMyBusinNtce"
                  uitype="text"
                  style="width: 500px"
                ></sbux-input>
                <sbux-input
                  id="inpMyBusinNtceAuto"
                  name="inpMyBusinNtceAuto"
                  uitype="text"
                  style="width: 500px"
                  onkeyup="autoDminsttNm(inpMyBusinNtceAuto);"
                  autocomplete-ref="dminstts"
                  autocomplete-height="200px"
                >
                </sbux-input>
                <div class="box-top-menu picker-btn">
                  <button id="submitBtn">
                    <a href="javascript:searchMyBusinNtce();">검색</a>
                  </button>
                </div>
              </div>
            </div>
            <div class="bid-con-box">
              <div
                id="grdMyBusinNtceArea"
                style="width: 100%; height: 301px"
              ></div>
            </div>
          </div>
        </li>
      </div>
    </div>
    <div id="bid-main-search">
      <div class="bid-box">
        <h3 class="bid-title01">공고 사업</h3>
        <div class="box-top-menu-wrap">
          <sbux-select
            id="grdBidNtceSearchArea_pagingSize"
            name="grdBidNtceSearchArea_pagingSize"
            uitype="single"
            jsondata-ref="grdBidNtceSearchArea_pagingSize"
            onchange="fn_changeGrdBidNtceSearchAreaPagingSize(grdBidNtceSearchArea_pagingSize)"
          >
          </sbux-select>
          <ul class="box-top-menu">
            <%--
            <li>
              <a
                href="javascript:downloadExcelAll('grdBidNtceSearch', '입찰공고_사업_전체', null, '4', 'memberMainNtcSch', getPageParam());"
                >엑셀 전체 다운로드</a
              >
            </li>
            <li>
              <a
                href="javascript:downloadExcel('grdBidNtceSearch', '입찰공고_사업');"
                >엑셀 다운로드</a
              >
            </li>
            --%>
          </ul>
        </div>
        <div class="bid-con-box">
          <div
            id="grdBidNtceSearchArea"
            style="width: 100%; height: 602px"
          ></div>
        </div>
      </div>
    </div>

    <!-- 나의 낙찰분석 popup -->
    <jsp:include page="/jsp/main/myBidAnalyDt.jsp"></jsp:include>

    <!-- 관심회사분석 popup -->
    <jsp:include page="/jsp/main/compCmpyDt.jsp"></jsp:include>
  </body>
</html>
